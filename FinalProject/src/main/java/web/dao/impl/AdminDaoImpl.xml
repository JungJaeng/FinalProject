<?xml version="1.0" encoding="UTF-8"?>

<!-- 마이바티스3 Mapper DOCTYPE -->
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
 <mapper namespace="web.dao.face.AdminDao">
 
	<select id="selectCntAll" parameterType="map" resultType="int">
		SELECT COUNT(*) FROM member
		<where>
			<if test="name!=null and search!=null">
				<choose>
					<when test="name.equals('user_id')">
						user_id LIKE '%'||#{search}||'%'
					</when>
				</choose>
			</if>
		</where>
	</select>
	<select id="selectAll" parameterType="web.util.Paging" resultType="web.dto.Member">
		SELECT * FROM (
			SELECT rownum rnum, B.* FROM (
				SELECT
				user_no, user_id, user_pw, user_nick, user_email FROM member
				<where>
					<if test="name!=null and search!=null">
						<choose>
						<when test="name.equals('user_id')">
							user_id LIKE '%'||#{search}||'%'
						</when>
						<when test="name.equals('user_nick')">
							user_nick LIKE '%'||#{search}||'%'
						</when>
						
						</choose>
					</if>
				</where>
				ORDER BY user_no DESC 
				) B
			ORDER BY rnum
		)WHERE rnum BETWEEN #{startNo } AND #{endNo }
	</select>
	
	<select id="selectUserByuser_no" parameterType="int" resultType="web.dto.Member">
		SELECT user_no, user_id, user_pw, user_nick, user_email FROM member
		WHERE user_no=#{user_no}
	</select>
	

	

 
 </mapper>